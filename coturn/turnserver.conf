# Coturn TURN/STUN Server Configuration for AsforceS Voice

# Listening IP address
# listening-ip=0.0.0.0

# External IP address (replace with your server's public IP)
# external-ip=YOUR_PUBLIC_IP

# Listening port for TURN/STUN
listening-port=3478

# Listening port for TLS
tls-listening-port=5349

# Min/Max port range for relay endpoints
min-port=49152
max-port=65535

# Use fingerprints in TURN messages
fingerprint

# Use long-term credential mechanism
lt-cred-mech

# Realm for authentication
realm=asforces.com

# Static user accounts (username:password)
# user=asforces:changeme
# Use environment variables or external database in production

# Enable verbose logging (disable in production)
verbose

# Log file
log-file=/var/log/turnserver.log

# Enable Prometheus metrics
prometheus

# SSL certificates (for TLS/DTLS)
# cert=/etc/letsencrypt/live/turn.yourdomain.com/fullchain.pem
# pkey=/etc/letsencrypt/live/turn.yourdomain.com/privkey.pem

# Disable UDP (optional, use TCP/TLS only)
# no-udp

# Disable TCP (optional, use UDP only)
# no-tcp

# Enable STUN
# stun-only

# Deny peer-to-peer connections
no-multicast-peers

# Mobility with ICE
mobility

# Disable software attributes in STUN/TURN messages
no-software-attribute

# CLI password (for turnserver CLI access)
# cli-password=changeme

# SQLite DB for dynamic users (alternative to static users)
# userdb=/var/lib/coturn/turndb

# PostgreSQL DB for dynamic users
# psql-userdb="host=postgres dbname=coturn user=turnserver password=changeme"

# Redis DB for dynamic users
# redis-userdb="ip=redis dbname=0 password=changeme connect_timeout=30"

# Banned/Restricted IPs
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=192.168.0.0-192.168.255.255

# Allowed peer IPs (optional whitelist)
# allowed-peer-ip=0.0.0.0-255.255.255.255

# Total quota (bytes per user session)
# user-quota=0

# Total bandwidth quota (bytes per second)
# bps-capacity=0

# Max allocations per session
# max-allocate-lifetime=3600

# Channel lifetime
# channel-lifetime=600

# Permission lifetime
# permission-lifetime=300

# Server name
server-name=asforces-turn

# Process management
# proc-user=turnserver
# proc-group=turnserver

# Additional security settings
# no-tlsv1
# no-tlsv1_1
# no-tlsv1_2

# Use secure ciphers only
# cipher-list="HIGH:!aNULL:!MD5:!RC4"

# WebRTC-specific optimizations
# no-tcp-relay
# stale-nonce=600

# Use alternate server (optional failover)
# alternate-server=turn2.yourdomain.com:3478

# Enable REST API (for temporary credentials)
# use-auth-secret
# static-auth-secret=YOUR_STATIC_SECRET

# Example: Generate temporary credentials with HMAC
# Username format: timestamp:username
# Password: base64(hmac-sha1(secret, username))


